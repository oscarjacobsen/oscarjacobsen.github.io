<!DOCTYPE html>
<html>

<head>
    <title>NVDB &harr; IFC</title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
</head>

<body>
    <h1>Nasjonal Vegdatabank &harr; BIM (.ifc)</h1>
    <p>Proof-Of-Concept App: For å håndtere NVDB-struktur i BIM .ifc-struktur.<br>API=ok, TODO: ca resten:)</p>
    <div class="status"></div>
    <br>
    <div class="vegobjekttyper"></div>
    <script>

        // Getting NVDB LES API Status
        $.getJSON('https://nvdbapiles-v2.atlas.vegvesen.no/status', function (data) {
            var nvdb_status_json = data
            var text = ""
            text += "Versjon: " + nvdb_status_json.datakatalog.versjon + "<br>"
            text += "Dato: " + nvdb_status_json.datakatalog.dato + "<br>"
            text += "Sist oppdatert: " + nvdb_status_json.datagrunnlag.sist_oppdatert + "<br>"
            $(".status").html(text);
        });


        // Getting NVDB LES API Vegobjekttyper 
        $.getJSON('https://nvdbapiles-v2.atlas.vegvesen.no/vegobjekttyper?inkluder=alle', function (data) {
            var nvdb_vegobjekttyper_json = data
            var text = ""
            for (let i = 0; i < nvdb_vegobjekttyper_json.length; i++) {
                var egenskapstyper = nvdb_vegobjekttyper_json[i].egenskapstyper
                if (!nvdb_vegobjekttyper_json[i].sosinvdbnavn.includes("Utgår_")) {
                    text += nvdb_vegobjekttyper_json[i].sosinvdbnavn + ", " + nvdb_vegobjekttyper_json[i].stedfesting + "<br>"
                }
                //text += nvdb_vegobjekttyper_json[i].sosinvdbnavn + "<br>"
            }
            $(".vegobjekttyper").html(text + "<br>"); //+ JSON.stringify(data));
        });
    </script>
</body>

</html>